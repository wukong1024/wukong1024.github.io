<!DOCTYPE html><html lang="zh_CN"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta name="keywords" content="Hexo Theme Keep"><meta name="description" content="开发公司网站"><meta name="author" content="wukong"><title>UNEN | Wukong</title><link rel="stylesheet" href="/css/style.css"><link rel="shortcut icon" href="/images/logo.svg"><link rel="stylesheet" href="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.5.1/source/fontawesome/css/fontawesome.min.css"><link rel="stylesheet" href="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.5.1/source/fontawesome/css/regular.min.css"><link rel="stylesheet" href="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.5.1/source/fontawesome/css/solid.min.css"><link rel="stylesheet" href="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.5.1/source/fontawesome/css/brands.min.css"><script id="hexo-configurations">let KEEP=window.KEEP||{};KEEP.hexo_config={hostname:"wukong1024.github.io",root:"/",language:"zh_CN",path:"search.xml"},KEEP.theme_config={toc:{enable:!0,number:!0,expand_all:!0,init_open:!1},style:{primary_color:"#0066CC",avatar:"https://cdn.staticaly.com/gh/wukong1024/image-hosting@master/2103623-f44336.54bi7c1a3880.webp",favicon:"/images/logo.svg",article_img_align:"left",left_side_width:"260px",content_max_width:"920px",hover:{shadow:!0,scale:!0},first_screen:{enable:!1,background_img:"/images/bg.svg",description:"Keep writing and Keep loving."},scroll:{progress_bar:{enable:!1},percent:{enable:!0}}},local_search:{enable:!0,preload:!0},code_copy:{enable:!0,style:"default"},code_block:{tools:{enable:!0,style:"default"},highlight_theme:"default"},side_tools:{},pjax:{enable:!0},lazyload:{enable:!0},version:"3.5.1"},KEEP.language_ago={second:"%s seconds ago",minute:"%s minutes ago",hour:"%s hours ago",day:"%s days ago",week:"%s weeks ago",month:"%s months ago",year:"%s years ago"},KEEP.language_code_block={copy:"Copy code",copied:"Copied",fold:"Fold code block",folded:"Folded"}</script><meta name="generator" content="Hexo 5.4.0"><link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
</head><body><div class="progress-bar-container"><span class="pjax-progress-bar"></span> <i class="pjax-progress-icon fas fa-circle-notch fa-spin"></i></div><main class="page-container"><div class="page-main-content"><div class="page-main-content-top"><header class="header-wrapper"><div class="header-content"><div class="left"><a class="logo-title" href="/">Wukong</a></div><div class="right"><div class="pc"><ul class="menu-list"><li class="menu-item"><a href="/">HOME</a></li><li class="menu-item"><a href="/archives">ARCHIVES</a></li><li class="menu-item"><a href="/categories">CATEGORIES</a></li><li class="menu-item"><a href="/tags">TAGS</a></li><li class="menu-item"><a href="/about">ABOUT</a></li><li class="menu-item search search-popup-trigger"><i class="fas fa-search"></i></li></ul></div><div class="mobile"><div class="icon-item search search-popup-trigger"><i class="fas fa-search"></i></div><div class="icon-item menu-bar"><div class="menu-bar-middle"></div></div></div></div></div><div class="header-drawer"><ul class="drawer-menu-list"><li class="drawer-menu-item flex-center"><a href="/">HOME</a></li><li class="drawer-menu-item flex-center"><a href="/archives">ARCHIVES</a></li><li class="drawer-menu-item flex-center"><a href="/categories">CATEGORIES</a></li><li class="drawer-menu-item flex-center"><a href="/tags">TAGS</a></li><li class="drawer-menu-item flex-center"><a href="/about">ABOUT</a></li></ul></div><div class="window-mask"></div></header></div><div class="page-main-content-middle"><div class="main-content"><div class="fade-in-down-animation"><div class="post-page-container"><div class="article-content-container"><div class="article-title"><span class="title-hover-animation">UNEN</span></div><div class="article-header"><div class="avatar"><img src="https://cdn.staticaly.com/gh/wukong1024/image-hosting@master/2103623-f44336.54bi7c1a3880.webp"></div><div class="info"><div class="author"><span class="name">wukong</span></div><div class="meta-info"><div class="article-meta-info"><span class="article-date article-meta-item"><i class="fa-regular fa-calendar-plus"></i>&nbsp; <span class="pc">2019-02-19 00:00:00</span> <span class="mobile">2019-02-19 00:00</span> </span><span class="article-update-date article-meta-item"><i class="fas fa-file-pen"></i>&nbsp; <span class="pc">2024-12-20 23:45:05</span> </span><span class="article-categories article-meta-item"><i class="fas fa-folder"></i>&nbsp;<ul><li><a href="/categories/code/">code</a>&nbsp;</li></ul></span><span class="article-tags article-meta-item"><i class="fas fa-tags"></i>&nbsp;<ul><li><a href="/tags/learn/">learn</a>&nbsp;</li><li>| <a href="/tags/unen/">unen</a>&nbsp;</li></ul></span><span class="article-wordcount article-meta-item"><i class="fas fa-file-word"></i>&nbsp;<span>4.9k Words</span> </span><span class="article-min2read article-meta-item"><i class="fas fa-clock"></i>&nbsp;<span>21 Mins</span> </span><span class="article-pv article-meta-item"><i class="fas fa-eye"></i>&nbsp;<span id="busuanzi_value_page_pv"></span></span></div></div></div></div><div class="article-content keep-markdown-body"><h1 id="UNEN"><a href="#UNEN" class="headerlink" title="UNEN"></a>UNEN</h1><p>[TOC]</p><p>阿里云</p><p>域名 unen.cn 公司</p><p>服务器 47.107.224.216 Windows Server 2012R2 悟空</p><h2 id="服务器配置及备案"><a href="#服务器配置及备案" class="headerlink" title="服务器配置及备案"></a>服务器配置及备案</h2><h3 id="备案"><a href="#备案" class="headerlink" title="备案"></a>备案</h3><p>服务器在悟空账户 域名在公司账户</p><p>登录悟空账户 进入备案管理</p><p><img lazyload alt="image" data-src="https://ws1.sinaimg.cn/large/0062r8cigy1g7p3lis27qj31mt0ffgwq.jpg" alt="备案管理1"></p><p>复制备案服务号 切换到公司账户</p><p><img lazyload alt="image" data-src="https://ws1.sinaimg.cn/large/0062r8cigy1g7p3m5beg8j31fv08jjv4.jpg" alt="备案管理2"></p><p>切换公司账户后 进入ICP备案系统 填写基本信息后 将复制的备案服务号 粘贴到 ECS实例中</p><h3 id="已弃用的方案windows"><a href="#已弃用的方案windows" class="headerlink" title="已弃用的方案windows"></a>已弃用的方案windows</h3><h4 id="FileZilla"><a href="#FileZilla" class="headerlink" title="FileZilla"></a>FileZilla</h4><p>远程连接 <a class="link" target="_blank" rel="noopener" href="https://jingyan.baidu.com/article/e4d08ffdb2e6080fd2f60d3f.html">教程<i class="fas fa-external-link-alt"></i></a></p><h4 id="配置阿里云oss做media库"><a href="#配置阿里云oss做media库" class="headerlink" title="配置阿里云oss做media库"></a>配置阿里云oss做media库</h4><p><a class="link" target="_blank" rel="noopener" href="https://blog.csdn.net/u014633966/article/details/78727034">教程<i class="fas fa-external-link-alt"></i></a></p><h4 id="解决远程无法连接问题"><a href="#解决远程无法连接问题" class="headerlink" title="解决远程无法连接问题"></a>解决远程无法连接问题</h4><ol><li><p>启动wimRM服务 <a class="link" target="_blank" rel="noopener" href="https://cloud.tencent.com/developer/ask/24542/answer/26856">教程<i class="fas fa-external-link-alt"></i></a></p></li><li><p>在本地服务器中 启动远程管理</p></li><li><p>安装远程协助 <a class="link" target="_blank" rel="noopener" href="https://help.aliyun.com/knowledge_detail/40880.html?spm=5176.11065259.1996646101.searchclickresult.52981ee5qRywnE#windows2012">教程<i class="fas fa-external-link-alt"></i></a></p></li><li><p>在高级属性中 打开远程协助</p></li></ol><h4 id="1-解决80端口被占用问题"><a href="#1-解决80端口被占用问题" class="headerlink" title="1.解决80端口被占用问题"></a>1.解决80端口被占用问题</h4><ol><li>使用管理员身份运行 shell</li><li>net stop http //停止系统http服务</li><li>sc config http start= disabled //禁用服务的自动启动，此处注意等号后面的空格不可少</li></ol><h4 id="2-开放80端口"><a href="#2-开放80端口" class="headerlink" title="2.开放80端口"></a>2.开放80端口</h4><p>控制面板—防火墙—高级设置—高级设置—出站规则—最右边 新建规则“新建出站规则向导”，在向导的第一步，选择要创建的防火墙规则类型，选择第二个“端口”。</p><p>再增加 入站规则</p><p>开放80 命名为 unen</p><h3 id="更换为linux服务器"><a href="#更换为linux服务器" class="headerlink" title="更换为linux服务器"></a>更换为linux服务器</h3><p>被window服务器折磨到不行，现更换服务器为linux，现在本地测试成功在，再更换服务器后进行部署。</p><h4 id="mysql的安装与远程登录"><a href="#mysql的安装与远程登录" class="headerlink" title="mysql的安装与远程登录"></a>mysql的安装与远程登录</h4><h5 id="下载与安装"><a href="#下载与安装" class="headerlink" title="下载与安装"></a>下载与安装</h5><h6 id="1-下载安装包"><a href="#1-下载安装包" class="headerlink" title="1.下载安装包"></a>1.下载安装包</h6><p>下载<a class="link" target="_blank" rel="noopener" href="https://dev.mysql.com/downloads/mysql/">链接<i class="fas fa-external-link-alt"></i></a> 选择对应版本 这里选用的是 Linux-Generic</p><h6 id="2-安装依赖库"><a href="#2-安装依赖库" class="headerlink" title="2.安装依赖库"></a>2.安装依赖库</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">apt install numactl</span><br><span class="line">apt install libaio-dev</span><br></pre></td></tr></table></figure><h6 id="3-解压到指定目录"><a href="#3-解压到指定目录" class="headerlink" title="3.解压到指定目录"></a>3.解压到指定目录</h6><p>解压tar.xz文件：先 xz -d xxx.tar.xz 将 xxx.tar.xz解压成 xxx.tar 然后，再用 tar -xvf xxx.tar来解包。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">tar -zxvf mysql-xxx</span><br><span class="line">mv mysql-xxx /usr/local/mysql</span><br></pre></td></tr></table></figure><h6 id="4-添加文件夹、用户、设置权限"><a href="#4-添加文件夹、用户、设置权限" class="headerlink" title="4.添加文件夹、用户、设置权限"></a>4.添加文件夹、用户、设置权限</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">groupadd mysql</span><br><span class="line">useradd -r -g mysql -s /bin/false mysql</span><br><span class="line"></span><br><span class="line">mkdir mysql-files</span><br><span class="line">chown mysql:mysql mysql-files</span><br><span class="line">chmod 750 mysql-files</span><br><span class="line"></span><br></pre></td></tr></table></figure><h6 id="5-初始化数据库"><a href="#5-初始化数据库" class="headerlink" title="5.初始化数据库"></a>5.初始化数据库</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">bin/mysqld --initialize --user=mysql 保存生成的临时密码 root@localhost: xxx</span><br><span class="line"></span><br></pre></td></tr></table></figure><h6 id="6-安装ssl服务"><a href="#6-安装ssl服务" class="headerlink" title="6.安装ssl服务"></a>6.安装ssl服务</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">apt install openssh</span><br><span class="line">bin/mysql_ssl_rsa_setup</span><br></pre></td></tr></table></figure><h6 id="7-复制服务文件"><a href="#7-复制服务文件" class="headerlink" title="7.复制服务文件"></a>7.复制服务文件</h6><p><code>cp support-files/mysql.server /etc/init.d/mysql.server</code></p><h5 id="登录msyql与修改密码"><a href="#登录msyql与修改密码" class="headerlink" title="登录msyql与修改密码"></a>登录msyql与修改密码</h5><h6 id="1-开启服务"><a href="#1-开启服务" class="headerlink" title="1.开启服务"></a>1.开启服务</h6><p>&amp;是后台运行的意思，执行命令之后，终端会卡在一个位置，再按一次enter即可</p><p><code>bin/mysqld_safe --user=mysql &amp;</code></p><h6 id="2-使用root登录并改密"><a href="#2-使用root登录并改密" class="headerlink" title="2.使用root登录并改密"></a>2.使用root登录并改密</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">bin/mysql -uroot -p 输入之前保存的随机密码</span><br><span class="line"></span><br><span class="line">ALTER USER &#x27;root&#x27;@&#x27;localhost&#x27; IDENTIFIED BY &#x27;new password&#x27; PASSWORD EXPIRE NEVER;</span><br><span class="line">use mysql;</span><br><span class="line">update user set host=&#x27;%&#x27; where user = &#x27;root&#x27;;</span><br><span class="line">ALTER USER &#x27;root&#x27;@&#x27;%&#x27; IDENTIFIED WITH mysql_native_password BY &#x27;new password&#x27;;</span><br><span class="line">flush privileges;</span><br></pre></td></tr></table></figure><h6 id="3-配置mysql为全局变量"><a href="#3-配置mysql为全局变量" class="headerlink" title="3.配置mysql为全局变量"></a>3.配置mysql为全局变量</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo nano /etc/profile</span><br><span class="line">export PATH=$PATH:/opt/software/node-v8.9.3-linux-x64/bin/node   //增加并保存</span><br><span class="line">//修改好配置文件后执行source /etc/profile 或者 source /root/.bashrc使配置文件生效</span><br></pre></td></tr></table></figure><h5 id="mysql问题集锦"><a href="#mysql问题集锦" class="headerlink" title="mysql问题集锦"></a>mysql问题集锦</h5><p>ERROR 2002 (HY000): Can’t connect to local MySQL server through socket ‘/tmp/mysql.sock’ (2)</p><p><code>/etc/init.d/mysql.server start</code></p><h4 id="配置python开发环境"><a href="#配置python开发环境" class="headerlink" title="配置python开发环境"></a>配置python开发环境</h4><h5 id="默认设为python3和pip3"><a href="#默认设为python3和pip3" class="headerlink" title="默认设为python3和pip3"></a>默认设为python3和pip3</h5><p>sudo rm -rf /usr/bin/python<br>删除后再建立新的链接关系：<br>sudo ln -s /usr/bin/python3 /usr/bin/python</p><p>sudo apt-get install python3-pip</p><p>设置pip3同上</p><h5 id="问题集锦"><a href="#问题集锦" class="headerlink" title="问题集锦"></a>问题集锦</h5><p>安装mysqlclient报mysql_config not found<a class="link" target="_blank" rel="noopener" href="https://blog.csdn.net/qq_37925422/article/details/80552347">教程<i class="fas fa-external-link-alt"></i></a></p><h2 id="服务器开发"><a href="#服务器开发" class="headerlink" title="服务器开发"></a>服务器开发</h2><h3 id="Django"><a href="#Django" class="headerlink" title="Django"></a>Django</h3><h4 id="开发环境"><a href="#开发环境" class="headerlink" title="开发环境"></a>开发环境</h4><h5 id="软件列表"><a href="#软件列表" class="headerlink" title="软件列表"></a>软件列表</h5><p>python mysql navicat</p><h5 id="安装mysql8-0"><a href="#安装mysql8-0" class="headerlink" title="安装mysql8.0"></a>安装mysql8.0</h5><p>下载<a class="link" target="_blank" rel="noopener" href="https://dev.mysql.com/downloads/mysql/">链接<i class="fas fa-external-link-alt"></i></a></p><p>安装<a class="link" target="_blank" rel="noopener" href="https://blog.csdn.net/qq_37350706/article/details/81707862">教程<i class="fas fa-external-link-alt"></i></a></p><p>shell下登录mysql <code>mysql -uroot -p</code></p><p>修改密码<code>ALTER USER &quot;root&quot;@&quot;localhost&quot; IDENTIFIED BY &quot;你的新密码&quot;;</code></p><h5 id="python虚拟环境"><a href="#python虚拟环境" class="headerlink" title="python虚拟环境"></a>python虚拟环境</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">pip install virtualenv  安装模块虚拟环境模块</span><br><span class="line"></span><br><span class="line">pip install virtualenvwrapper-win  安装环境管理模块</span><br><span class="line"></span><br><span class="line">mkvirtualenv testenv  新建环境在Administrator/Envs/</span><br><span class="line"></span><br><span class="line">mkvirtualenv --python=python版本的python.exe路径 虚拟环境名称   指定版本</span><br><span class="line"></span><br><span class="line">rmvirtualenv &lt;name&gt; 删除环境</span><br><span class="line"></span><br><span class="line">workon 查看当前虚拟环境</span><br><span class="line"></span><br><span class="line">workon &lt;name&gt; 进入虚拟环境 (在shell下运行)</span><br><span class="line"></span><br><span class="line">deactivate退出环境</span><br></pre></td></tr></table></figure><h5 id="安装依赖的包"><a href="#安装依赖的包" class="headerlink" title="安装依赖的包"></a>安装依赖的包</h5><p>导出 pip freeze &gt;r.txt</p><p>新建 r.txt文件 pip install -r r.txt安装</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure><h4 id="项目开始"><a href="#项目开始" class="headerlink" title="项目开始"></a>项目开始</h4><h5 id="创建项目"><a href="#创建项目" class="headerlink" title="创建项目"></a>创建项目</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">django-admin startproject mysite 创建django项目</span><br><span class="line">python manage.py runserver 8080 设置端口号</span><br><span class="line">python manage.py runserver 0.0.0.0:8080  监听所有公共ip</span><br><span class="line">python manage.py startapp &lt;name&gt; 创建应用后在INSTALLED_APPS中增加 &lt;name&gt;</span><br></pre></td></tr></table></figure><h5 id="搭建目录文件"><a href="#搭建目录文件" class="headerlink" title="搭建目录文件"></a>搭建目录文件</h5><p>apps 存放应用列表 同时在setting 中增加 <code>sys.path.insert(0, os.path.join(BASE_DIR, &#39;apps&#39;))</code></p><p>log 存放日志</p><p>media 存放上传文件 增加 <code>MEDIA_URL = &#39;/media/&#39; MEDIA_ROOT = os.path.join(BASE_DIR, &#39;media&#39;)</code></p><p>static 全局静态文件 js css 静态图片 STATIC_URL 后增加<code>STATICFILES_DIRS = [os.path.join(BASE_DIR, &#39;static&#39;)]</code></p><p>templates 网页模板 在 TEMPLATES 下的DIRS中增加 <code>os.path.join(BASE_DIR, &#39;templates&#39;)</code></p><h5 id="配置数据库"><a href="#配置数据库" class="headerlink" title="配置数据库"></a>配置数据库</h5><p>先配置 MySQLdb<a class="link" target="_blank" rel="noopener" href="https://www.lfd.uci.edu/~gohlke/pythonlibs/#mysql-python">驱动<i class="fas fa-external-link-alt"></i></a> 下载对应版本后</p><p>虚拟环境下 pip install xx.whl pip install mysqlclient</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">DATABASES = &#123;</span><br><span class="line">    <span class="string">&#x27;default&#x27;</span>: &#123;</span><br><span class="line">        <span class="string">&#x27;ENGINE&#x27;</span>: <span class="string">&#x27;django.db.backends.mysql&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;NAME&#x27;</span>: <span class="string">&#x27;MOOC&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;USER&#x27;</span>: <span class="string">&#x27;root&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;PASSWORD&#x27;</span>: <span class="string">&#x27;1234&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;HOST&#x27;</span>: <span class="string">&#x27;127.0.0.1&#x27;</span>,</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>python manage.py makemigrations</p><p>python manage.py migrate</p><h5 id="创建超级用户"><a href="#创建超级用户" class="headerlink" title="创建超级用户"></a>创建超级用户</h5><p><code>python manage.py createsuperuser</code></p><p>wukong 1234</p><h4 id="应用开发"><a href="#应用开发" class="headerlink" title="应用开发"></a>应用开发</h4><h5 id="models"><a href="#models" class="headerlink" title="models"></a>models</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="keyword">from</span> __future__ <span class="keyword">import</span> unicode_literals</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> django.db <span class="keyword">import</span> models</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># Create your models here.</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">UserMessage</span>(<span class="params">models.Model</span>):</span></span><br><span class="line">    name = models.CharField(max_length=<span class="number">20</span>, verbose_name=<span class="string">u&#x27;用户名&#x27;</span>)  <span class="comment"># 对字段的注释</span></span><br><span class="line">    email = models.EmailField(verbose_name=<span class="string">u&#x27;邮箱&#x27;</span>)</span><br><span class="line">    address = models.CharField(max_length=<span class="number">100</span>, verbose_name=<span class="string">u&#x27;地址&#x27;</span>)</span><br><span class="line">    message = models.CharField(max_length=<span class="number">500</span>, verbose_name=<span class="string">u&#x27;留言信息&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Meta</span>:</span></span><br><span class="line">        verbose_name = <span class="string">u&#x27;用户留言信息&#x27;</span></span><br><span class="line">        verbose_name_plural = verbose_name</span><br><span class="line">        <span class="comment"># db_table=&#x27;user_message&#x27;  # 指定表名</span></span><br><span class="line">        <span class="comment"># ordering = &#x27;-id&#x27;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="根据现有数据库建立model"><a href="#根据现有数据库建立model" class="headerlink" title="根据现有数据库建立model"></a>根据现有数据库建立model</h5><p>创建一个项目，修改seting文件，在setting里面设置你要连接的数据库类型和连接名称，地址之类，和创建新项目的时候一致<br>运行下面代码可以自动生成models模型文件<br>python manage.py inspectdb<br>这样就可以在命令行看到数据库的模型文件了</p><p>把模型文件导入到app中<br>创建一个app<br>django-admin.py startapp app<br>python manage.py inspectdb &gt; app/models.py</p><h5 id="用户的登录和注册"><a href="#用户的登录和注册" class="headerlink" title="用户的登录和注册"></a>用户的登录和注册</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 重定义验证方式</span></span><br><span class="line">AUTHENTICATION_BACKENDS = (</span><br><span class="line">    <span class="string">&#x27;users.views.CustomBacked&#x27;</span>,</span><br><span class="line">)</span><br></pre></td></tr></table></figure><p>安装 <code>django-simple-captcha</code> APPS 下增加 captcha</p><h4 id="附加包开发"><a href="#附加包开发" class="headerlink" title="附加包开发"></a>附加包开发</h4><h5 id="xadmin"><a href="#xadmin" class="headerlink" title="xadmin"></a>xadmin</h5><p>下载xadmin <a class="link" target="_blank" rel="noopener" href="https://github.com/sshwsfc/xadmin">链接<i class="fas fa-external-link-alt"></i></a></p><p>新建extra_apps 文件夹 将xadmin 复制到其中 注册xadmin和crispy_forms 将extra_apps 加入系统路径</p><p>配置后需要更新数据库</p><p>个性化配置</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BaseSetting</span>(<span class="params"><span class="built_in">object</span></span>):</span>  <span class="comment"># 设置主题</span></span><br><span class="line">    enable_themes = <span class="literal">True</span></span><br><span class="line">    use_bootswatch = <span class="literal">True</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">GlobalSettings</span>(<span class="params"><span class="built_in">object</span></span>):</span>  <span class="comment"># 设置标题</span></span><br><span class="line">    site_title = <span class="string">&#x27;WMOOC&#x27;</span></span><br><span class="line">    site_footer = <span class="string">&#x27;Wukong&#x27;</span></span><br><span class="line">    menu_style = <span class="string">&#x27;accordion&#x27;</span>  <span class="comment"># 折叠目录</span></span><br><span class="line"></span><br><span class="line">xadmin.site.register(views.BaseAdminView, BaseSetting)</span><br><span class="line">xadmin.site.register(views.CommAdminView, GlobalSettings)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>增加djagno主题失败后 <a class="link" target="_blank" rel="noopener" href="https://www.jianshu.com/p/8d4d958b8e82">教程<i class="fas fa-external-link-alt"></i></a></p><h4 id="template"><a href="#template" class="headerlink" title="template"></a>template</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">data-url=<span class="string">&quot;&#123;&#123;MEDIA.URL&#125;&#125;&#123;&#123;course_org.image&#125;&#125;&quot;</span></span><br><span class="line"><span class="comment"># settings.py context_processors中增加</span></span><br><span class="line"><span class="comment"># 将 MEDIA.URL 注册到 html</span></span><br><span class="line">django.core.context_processors.media</span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="页码"><a href="#页码" class="headerlink" title="页码"></a>页码</h5><p><code>pip install django-pure-pagination</code></p><p>INSTALLED_APPS=(<br>…<br>‘pure_pagination’,<br>)</p><h3 id="peewee"><a href="#peewee" class="headerlink" title="peewee"></a>peewee</h3><h4 id="简介和配置"><a href="#简介和配置" class="headerlink" title="简介和配置"></a>简介和配置</h4><p>实际开发中，如无特殊需求，一般不会直接写 SQL，而是用更为方便的 ORM（对象关系映射，Object Relational Mapping）。顾名思义，就是将关系型数据库与 Python 中的对象关联起来，提供了一种操作数据的简便方式，相当于对数据库加了一层更友好的接口。</p><p>目前 Python 中比较流行的 ORM 解决方案有三种：</p><ol><li>Django ORM。使用方便，但很难脱离 Django 单独使用。</li><li>SQLAlchemy。功能强大，成熟可扩展，但学习门槛较高。</li><li>peewee。轻量，可扩展，易学习，但功能有限。</li></ol><p>安装peewee，然后shell下运行 导出数据库中的模型，参考链接: <a class="link" target="_blank" rel="noopener" href="http://docs.peewee-orm.com/en/latest/peewee/playhouse.html#pwiz-a-model-generator">pwiz-a-model-generator<i class="fas fa-external-link-alt"></i></a></p><p><code>python -m pwiz -e mysql -H localhost -p 3306 -u root -P password unen &gt;db.py</code></p><p>在同目录下新建py文件</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> db <span class="keyword">import</span> *</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> ProductPction.select():</span><br><span class="line">    <span class="built_in">print</span>(i.<span class="built_in">type</span>)</span><br></pre></td></tr></table></figure><h4 id="Querying"><a href="#Querying" class="headerlink" title="Querying"></a>Querying</h4><p>教程<a class="link" target="_blank" rel="noopener" href="https://peewee.readthedocs.io/en/latest/peewee/querying.html">链接<i class="fas fa-external-link-alt"></i></a></p><ul><li>Model.create(), for executing INSERT queries.</li><li>Model.save() and Model.update(), for executing UPDATE queries.</li><li>Model.delete_instance() and Model.delete(), for executing DELETE queries.</li><li>Model.select(), for executing SELECT queries.</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># save</span></span><br><span class="line">User.create(username=<span class="string">&#x27;Charlie&#x27;</span>)</span><br><span class="line"></span><br><span class="line">user = User(username=<span class="string">&#x27;Charlie&#x27;</span>)</span><br><span class="line">user.save()</span><br><span class="line"></span><br><span class="line">huey = User()</span><br><span class="line">huey.username = <span class="string">&#x27;Huey&#x27;</span></span><br><span class="line">huey.save()</span><br><span class="line"></span><br><span class="line"><span class="comment"># foreign key</span></span><br><span class="line">tweet = Tweet.create(user=huey, message=<span class="string">&#x27;Hello!&#x27;</span>)</span><br><span class="line">tweet = Tweet.create(user=<span class="number">2</span>, message=<span class="string">&#x27;Hello again!&#x27;</span>)</span><br><span class="line"></span><br><span class="line">data_source = [</span><br><span class="line">    &#123;<span class="string">&#x27;field1&#x27;</span>: <span class="string">&#x27;val1-1&#x27;</span>, <span class="string">&#x27;field2&#x27;</span>: <span class="string">&#x27;val1-2&#x27;</span>&#125;,</span><br><span class="line">    &#123;<span class="string">&#x27;field1&#x27;</span>: <span class="string">&#x27;val2-1&#x27;</span>, <span class="string">&#x27;field2&#x27;</span>: <span class="string">&#x27;val2-2&#x27;</span>&#125;,</span><br><span class="line">    <span class="comment"># ...</span></span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> data_dict <span class="keyword">in</span> data_source:</span><br><span class="line">    MyModel.create(**data_dict)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># This is much faster.</span></span><br><span class="line"><span class="keyword">with</span> db.atomic():</span><br><span class="line">    <span class="keyword">for</span> data_dict <span class="keyword">in</span> data_source:</span><br><span class="line">        MyModel.create(**data_dict)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># We can INSERT tuples as well...</span></span><br><span class="line">data = [(<span class="string">&#x27;val1-1&#x27;</span>, <span class="string">&#x27;val1-2&#x27;</span>),</span><br><span class="line">        (<span class="string">&#x27;val2-1&#x27;</span>, <span class="string">&#x27;val2-2&#x27;</span>),</span><br><span class="line">        (<span class="string">&#x27;val3-1&#x27;</span>, <span class="string">&#x27;val3-2&#x27;</span>)]</span><br><span class="line">fields = [MyModel.field1, MyModel.field2]</span><br><span class="line"><span class="comment"># But we need to indicate which fields the values correspond to.</span></span><br><span class="line"><span class="keyword">with</span> db.atomic():</span><br><span class="line">    MyModel.insert_many(data, fields=fields).execute()</span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;user_list.txt&#x27;</span>) <span class="keyword">as</span> fh:</span><br><span class="line">    <span class="comment"># Create a list of unsaved User instances.</span></span><br><span class="line">    users = [User(username=line.strip()) <span class="keyword">for</span> line <span class="keyword">in</span> fh.readlines()]</span><br><span class="line"></span><br><span class="line"><span class="comment"># update</span></span><br><span class="line">query = Stat.update(counter=Stat.counter + <span class="number">1</span>).where(Stat.url == request.url)</span><br><span class="line">query.execute()</span><br><span class="line"></span><br><span class="line">subquery = Tweet.select(fn.COUNT(Tweet.<span class="built_in">id</span>)).where(Tweet.user == User.<span class="built_in">id</span>)</span><br><span class="line">update = User.update(num_tweets=subquery)</span><br><span class="line">update.execute()</span><br><span class="line"></span><br><span class="line"><span class="comment"># delete</span></span><br><span class="line">user = User.get(User.<span class="built_in">id</span> == <span class="number">1</span>)</span><br><span class="line">user.delete_instance()</span><br><span class="line"></span><br><span class="line"><span class="comment"># Selecting a single record</span></span><br><span class="line">User.get(User.<span class="built_in">id</span> == <span class="number">1</span>)</span><br><span class="line">User.get_by_id(<span class="number">1</span>)  <span class="comment"># Same as above.</span></span><br><span class="line">User[<span class="number">1</span>]  <span class="comment"># Also same as above.</span></span><br><span class="line">User.get(User.<span class="built_in">id</span> == <span class="number">1</span>).username</span><br><span class="line">User.get(User.username == <span class="string">&#x27;Charlie&#x27;</span>)</span><br><span class="line">user, created = User.get_or_create(username=username)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Selecting multiple records</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>query = User.select()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>[user.username <span class="keyword">for</span> user <span class="keyword">in</span> query]</span><br><span class="line">[<span class="string">&#x27;Charlie&#x27;</span>, <span class="string">&#x27;Huey&#x27;</span>, <span class="string">&#x27;Peewee&#x27;</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>query[<span class="number">1</span>]</span><br><span class="line">&lt;__main__.User at <span class="number">0x7f83e80f5550</span>&gt;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>query[<span class="number">1</span>].username</span><br><span class="line"><span class="string">&#x27;Huey&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>query = User.select().dicts()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> row <span class="keyword">in</span> query:</span><br><span class="line"><span class="meta">... </span>    <span class="built_in">print</span>(row)</span><br><span class="line"></span><br><span class="line">&#123;<span class="string">&#x27;id&#x27;</span>: <span class="number">1</span>, <span class="string">&#x27;username&#x27;</span>: <span class="string">&#x27;Charlie&#x27;</span>&#125;</span><br><span class="line">&#123;<span class="string">&#x27;id&#x27;</span>: <span class="number">2</span>, <span class="string">&#x27;username&#x27;</span>: <span class="string">&#x27;Huey&#x27;</span>&#125;</span><br><span class="line">&#123;<span class="string">&#x27;id&#x27;</span>: <span class="number">3</span>, <span class="string">&#x27;username&#x27;</span>: <span class="string">&#x27;Peewee&#x27;</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># orderding</span></span><br><span class="line">Tweet.select().order_by(-Tweet.created_date)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="客户端开发"><a href="#客户端开发" class="headerlink" title="客户端开发"></a>客户端开发</h2><h3 id="树莓派"><a href="#树莓派" class="headerlink" title="树莓派"></a>树莓派</h3><h4 id="硬件"><a href="#硬件" class="headerlink" title="硬件"></a>硬件</h4><ul><li>树莓派Raspberry3b+主板</li><li>外接显示屏，支持HDMI接口（系统默认只支持HDMI显示）</li><li>3.5寸触摸屏显示器-LCD屏幕（需要系统单独按照驱动）</li><li>16GB TF卡</li><li>读卡器</li><li>鼠标（usb有线）</li><li>键盘（usb有线）</li><li>HDMI连接线</li><li>5V2A的电源和micro usb线</li></ul><h4 id="软件"><a href="#软件" class="headerlink" title="软件"></a>软件</h4><ul><li>SD Formatter（格式化工具）</li><li>Win32DiskImager（烧录工具）</li><li>2018-11-13-raspbian-stretch.img（镜像文件）</li></ul><h4 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h4><p>用”SD Formatter”格式化TF卡后，再将镜像烧录到其中 插入树莓派 接入显示器，鼠标，键盘后启动。</p><p><strong>重点</strong>：烧录完成后，不要点击格式化TF卡！！！</p><h4 id="无线连接"><a href="#无线连接" class="headerlink" title="无线连接"></a>无线连接</h4><p>开启VNC SSH GPIO</p><p><img lazyload alt="image" data-src="https://ws1.sinaimg.cn/large/0062r8cigy1g7p3n2tdu2j30ff0q8qkf.jpg" alt="image.png"></p><p><img lazyload alt="image" data-src="https://ws1.sinaimg.cn/large/0062r8cigy1g7p3nrhl4rj30dv0c2n1e.jpg" alt="image.png"></p><h5 id="putty"><a href="#putty" class="headerlink" title="putty"></a>putty</h5><p>在TF-卡中新建文件 ssh （系统默认不开机ssh）</p><p>登录路由器管理界面查询树莓派的ip地址</p><p><img lazyload alt="image" data-src="https://ws1.sinaimg.cn/large/0062r8cigy1g7p3o6ahv7j30lc03jdgx.jpg" alt="image.png"></p><p>服务器下载并安装putty 输入上图中的IP 开始连接默认用户名 pi 密码 respberry</p><p><img lazyload alt="image" data-src="https://ws1.sinaimg.cn/large/0062r8cigy1g7p3oghtekj30ne0eq0z3.jpg" alt="image.png"></p><h5 id="VNC-Viewer"><a href="#VNC-Viewer" class="headerlink" title="VNC Viewer"></a>VNC Viewer</h5><p>putty登录后在终端输入 <code>sudo raspi-config</code></p><p>选择 5.INterfacing Options</p><p>再选择 P3 VNC</p><p>服务器下载并安装VNC Viewer</p><p><img lazyload alt="image" data-src="https://ws1.sinaimg.cn/large/0062r8cigy1g7p3pejrzoj30i00e7qew.jpg" alt="image.png"></p><h5 id="IP与MAC地址绑定"><a href="#IP与MAC地址绑定" class="headerlink" title="IP与MAC地址绑定"></a>IP与MAC地址绑定</h5><p>登录路由器管理界面后，在高级设置中</p><p><img lazyload alt="image" data-src="https://ws1.sinaimg.cn/large/0062r8cigy1g7p3qe7w54j30y80psgw8.jpg" alt="image.png"></p><p>添加IP与MAC地址绑定</p><p>更改VNC分辨率<code>vncserver -geometry 1200x1366</code></p><p>更改后用IP+端口号登陆</p><h5 id="更换源"><a href="#更换源" class="headerlink" title="更换源"></a>更换源</h5><p>sudo nano /etc/apt/sources.list</p><p>注释第一行 增加 <code>deb https://mirrors.tuna.tsinghua.edu.cn/raspbian/raspbian/ stretch main contrib non-free rpi</code></p><p>同步更新源 <code>sudo apt-get update</code></p><p>升级软件包 <code>sudo apt-get upgrade</code></p><h4 id="Linux教程"><a href="#Linux教程" class="headerlink" title="Linux教程"></a>Linux教程</h4><h5 id="关机重启"><a href="#关机重启" class="headerlink" title="关机重启"></a>关机重启</h5><p><code>ctrl + alt + t</code>打开终端</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">#关机</span><br><span class="line">sudo shutdown -h now</span><br><span class="line">sudo poweroff</span><br><span class="line">shutdown -r重启  -c 取消 now 现在  20:25 今天的20:25  +10 10分钟后关机</span><br><span class="line"></span><br><span class="line">#重启</span><br><span class="line">sudo reboot</span><br><span class="line">sudo shutdown -r now</span><br><span class="line"></span><br><span class="line">#注销</span><br><span class="line">logout :退出 注销</span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="系统目录说明"><a href="#系统目录说明" class="headerlink" title="系统目录说明"></a>系统目录说明</h5><p>/ 根路径</p><p>这是Linux系统的“根”目录，也是所有目录结构的最底层。在UNIX以及和它兼容的系统中，”/“是一个单独的目录。</p><p>/boot</p><p>这个目录下包含系统启动文件（boot loader），例如Grub，Lilo或者Kernel，以及initrd，system.map等配置文件。</p><p>/sys</p><p>这个目录下包含内核、固件以及系统相关文件。</p><p>/sbin</p><p>包含系统操作和运作所必需的二进制文件以及管理工具，主要就是可执行文件。类似WINDOWS下的EXE文件。</p><p>/bin</p><p>包含单用户模式下的二进制文件以及工具程序，比如cat，ls，cp这些命令。</p><p>/lib</p><p>包含/sbin和/bin目录下二进制文件运行所需要的库文件。</p><p>/dev</p><p>内含必需的系统文件和驱动器。</p><p>/etc</p><p>内含系统配置文件，其下的目录，比如 /etc/hosts, /etc/resolv.conf, nsswitch.conf, 以及系统缺省设置，网络配置文件等等。以及一些系统和应用程序的配置文件。</p><p>/<strong>home</strong></p><p>每一个用户的在这个目录下，都会单独有一个以其<strong>用户名</strong>命令的目录，在这里保存着用户的个人设置文件，尤其是以 profile结尾的文件。但是也有例外，root用户的数据就不在这个目录中，而是单独在根路径下，保存在单独的/root文件夹下。</p><p>/<strong>media</strong></p><p>一个给所有可移动设备比如光驱、USB外接盘、软盘提供的常规挂载点。路径显示为<code>/media/用户名/U盘名</code></p><p>/mnt</p><p>临时文件系统挂载点。比如，你并不想长期挂载某个驱动器，而是只是临时挂载一会U盘烤个MP3之类的，那么应该挂载在这个位置下。</p><p>/opt</p><p>在Linux系统中，这个目录用到的并不多，opt是 可选系统程序包（Optional Software Packages）的简称。这个目录在UNIX系统，如Sun Solaris用途要广泛的多。</p><p>/usr</p><p>用户数据目录，包含了属于用户的实用程序和应用程序。这里有很多重要的，但并非关键的文件系统挂载这个路径下面。在这里，你会重新找到一个 bin、sbin 和 lib目录，其中包含非关键用户和系统二进制文件以及相关的库和共享目录，以及一些库文件。</p><p>/usr/sbin</p><p>包含系统中非必备和并不是特别重要的系统二进制文件以及网络应用工具。</p><p>/usr/bin</p><p>包含用户的非必备和并不是特别重要的二进制文件。</p><p>/usr/lib</p><p>保存着/usr/sbin以及/usr/bin中二进制文件所需要的库文件。</p><p>/usr/share</p><p>“平台无关”的共享数据目录。</p><p>/usr/local</p><p>是/usr下的二级目录，这里主要保存着包含系统二进制文件以及运行库在内的本地系统数据。</p><p>/var</p><p>这个路径下通常保存着包括系统日志、打印机后台文件（spool files）、定时任务（crontab）、邮件、运行进程、进程锁文件等。这个目录尤其需要注意进行日常的检查和维护，因为这个目录下文件的大小可能会增长很快，以致于很快占满硬盘，然后导致系统便会出现各种奇奇怪怪的问题。</p><p>/tmp</p><p>顾名思义，这是一个临时文件夹，专门用来保存临时文件，每次系统重启之后，这个目录下的”临时”文件便会被清空。同样，/var/tmp 也同样保存着临时文件。两者唯一的不同是，后者 /var/tmp目录保存的文件会受到系统保护，系统重启之后这个目录下的文件也不会被清空。</p><p>/proc</p><p>这个目录是驻留在系统内存中的虚拟（psuedo，伪）文件系统，其中保存的都是文本格式的系统内核和进程信息。</p><blockquote><p>LINUX系统目录结构图</p></blockquote><p><img lazyload alt="image" data-src="https://ws1.sinaimg.cn/large/0062r8cigy1g7p3qttiqzj30c00i8adh.jpg" alt="image.png"></p><h5 id="基本命令"><a href="#基本命令" class="headerlink" title="基本命令"></a>基本命令</h5><table><thead><tr><th>命令</th><th align="left">全称</th><th align="left">解释</th></tr></thead><tbody><tr><td>man + 命令</td><td align="left">Manual</td><td align="left">手册 查询其他命令用法</td></tr><tr><td>pwd</td><td align="left">Print working directory</td><td align="left">打印当前工作目录</td></tr><tr><td>cd</td><td align="left">Change directory</td><td align="left">切换目录</td></tr><tr><td>ls + -l</td><td align="left">List files</td><td align="left">列出目录下的文件</td></tr><tr><td>mkdir</td><td align="left">Make directory</td><td align="left">建立文件夹</td></tr><tr><td>rmdir</td><td align="left">Remove directory</td><td align="left">删除文件夹</td></tr><tr><td>cat</td><td align="left">Concatenate</td><td align="left">串联？查看文件 合并文件</td></tr><tr><td>touch</td><td align="left">touch</td><td align="left">新建文件</td></tr><tr><td>rm</td><td align="left">remove</td><td align="left">删除指定文件</td></tr><tr><td>clear</td><td align="left">clear</td><td align="left">清屏</td></tr><tr><td>tree</td><td align="left">tree</td><td align="left">文件树</td></tr><tr><td>cp</td><td align="left">cope</td><td align="left">复制</td></tr><tr><td>mv</td><td align="left">move</td><td align="left">移动/重命名</td></tr><tr><td>grep+字符串+文件名</td><td align="left">grep</td><td align="left">搜索</td></tr><tr><td>echo + 字符串 &gt; 文件</td><td align="left">&gt; 新建 &gt;&gt;增加</td><td align="left">输出内容到文件</td></tr></tbody></table><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">rm扩展: -r 删除目录文件   -f强制删除无提示</span><br><span class="line"></span><br><span class="line">tree扩展:  -d 只显示目录</span><br><span class="line"></span><br><span class="line">cp/mv扩展: -r 复制目录文件 -i 提示覆盖</span><br><span class="line"></span><br><span class="line">cat扩展:   -b空行不编号  -n全部编号</span><br><span class="line"></span><br><span class="line">cat + 文件[文件&gt;新文件] 合并文件</span><br><span class="line"></span><br><span class="line">grep扩展:  -n显示行号   -v反向选择   -i忽略大小写  ^a  ke$</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">tar -cvf py.tar 01.py 02.py 03.py  文件打包(不压缩)</span><br><span class="line"></span><br><span class="line">tar -xvf py.tar [-C dictionary]  文件解包  -z压缩为.gz   -j压缩为.bz2</span><br><span class="line"></span><br><span class="line">sudo apt install|remove|upgrade  软件名  sl 小火车 htop 系统进程</span><br><span class="line"></span><br><span class="line">chown: Change owner 改变所有者</span><br><span class="line"></span><br><span class="line">chgrp: Change group 改变用户组</span><br><span class="line"></span><br><span class="line">chmod: Change mode 改变模式</span><br><span class="line">insmod：Install module 安装模块</span><br><span class="line">rmmod：Remove module 删除模块</span><br><span class="line">lsmod：List module 列表模块</span><br><span class="line"></span><br><span class="line">sudo是superuser do的简写</span><br><span class="line"></span><br><span class="line">查看linux版本号：uname -a</span><br><span class="line"></span><br><span class="line">比较两个文件：diff 1.c 2.c 或cmp 1.c 2.c</span><br><span class="line"></span><br><span class="line">设置文件的读写权限：chmod u+w 1.c(增加文件拥有者对1.c写的权限)</span><br><span class="line">chmod g-r 1.c( 删除工作组对1.c读的权限)</span><br><span class="line">chmod o+x 1.c(增加其他用户对1.c的执行权限)</span><br><span class="line">chmod a-w 1.c(删除所有用户对1.c写的权限)</span><br><span class="line">chmod 777 -R aaa  更改目录及子文件子目录全部权限</span><br><span class="line">chmod u=rwx,g=rw,o=r aa.py</span><br><span class="line"></span><br><span class="line">u 所有者 g 所属组 o 其他用户</span><br><span class="line">r=4 w=2 x=1</span><br><span class="line"></span><br><span class="line">查看运行的进程：ps process status</span><br><span class="line">杀掉某个线程：kill 1186（1186是线程号）</span><br><span class="line"></span><br><span class="line">date  查询当前系统时间</span><br><span class="line"></span><br><span class="line">df -h   disk free 显示磁盘剩余空间     -h 人性化的方式显示文件大小</span><br><span class="line"></span><br><span class="line">alias ll=&quot;ls -lh&quot;  自定义命令的别名</span><br><span class="line">unalias ll 取消别名</span><br><span class="line"></span><br><span class="line">which ls 查看命令位置</span><br></pre></td></tr></table></figure><h4 id="树莓派实验室"><a href="#树莓派实验室" class="headerlink" title="树莓派实验室"></a>树莓派实验室</h4><h5 id="RPi-GPIO-模块使用基础"><a href="#RPi-GPIO-模块使用基础" class="headerlink" title="RPi.GPIO 模块使用基础"></a>RPi.GPIO 模块使用基础</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#导入模块</span></span><br><span class="line"><span class="keyword">import</span> RPi.GPIO <span class="keyword">as</span> GPIO</span><br><span class="line"><span class="comment">#针脚编号</span></span><br><span class="line">GPIO.setmode(GPIO.BCM)</span><br><span class="line"><span class="comment">#忽略警告s</span></span><br><span class="line">GPIO.setwarnings(<span class="literal">False</span>)</span><br><span class="line"><span class="comment">#配置通道</span></span><br><span class="line">GPIO.setup(channel,GPIO.IN,pull_up_down=GPIO.PUD_UP)</span><br><span class="line"><span class="comment">#输入 读取GPIO针脚的值</span></span><br><span class="line">GPIO.<span class="built_in">input</span>(channel)</span><br><span class="line"><span class="comment">#输出 设置GPIO针脚的输出状态 1/GPIO.HIGH/True</span></span><br><span class="line">GPIO.output(channel,state)</span><br><span class="line"><span class="comment">#边缘检测 RISING FALLING BOTH</span></span><br><span class="line">GPIO.wait_for_edge(channel, GPIO.RISING)</span><br><span class="line"></span><br><span class="line"><span class="comment">#清理</span></span><br><span class="line">GPIO.cleanup()</span><br><span class="line"><span class="comment">#检测Raspberry Pi主板的修订版本</span></span><br><span class="line">GPIO.RPI_REVISION</span><br><span class="line"><span class="comment">#检测RPI.GPIO的版本</span></span><br><span class="line">GPIO.VERSION</span><br><span class="line"></span><br><span class="line"><span class="comment">#线程回调 边缘检测</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">my_callback</span>(<span class="params">channel</span>):</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;这是一个边缘事件回调函数！&#x27;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;在通道 %s 上进行边缘检测&#x27;</span>%channel)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;该程序与您的主程序运行在不同的进程中&#x27;</span>)</span><br><span class="line"><span class="comment">#回调加入开关防抖</span></span><br><span class="line">GPIO.add_event_detect(channel, GPIO.RISING, callback=my_callback,bouncetime=<span class="number">200</span>)</span><br><span class="line"><span class="comment">#停止边缘检测事件</span></span><br><span class="line">GPIO.remove_event_detect(channel)</span><br><span class="line"></span><br></pre></td></tr></table></figure><h6 id="使用-RPi-GPIO-模块的输入（Input）功能"><a href="#使用-RPi-GPIO-模块的输入（Input）功能" class="headerlink" title="使用 RPi.GPIO 模块的输入（Input）功能"></a>使用 RPi.GPIO 模块的输入（Input）功能</h6><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">1.polling轮询 循环定时检查输入值</span></span><br><span class="line"><span class="string">2.interruots中断   边缘检测  检测临界值 falling edge rising edge</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure><h5 id="18B20温度传感器"><a href="#18B20温度传感器" class="headerlink" title="18B20温度传感器"></a>18B20温度传感器</h5><p>坏了 2.68又买了一个 等快递<br><code>https://www.jianshu.com/p/1aeed4cfd431</code></p><h5 id="DHT11温湿度传感器"><a href="#DHT11温湿度传感器" class="headerlink" title="DHT11温湿度传感器"></a>DHT11温湿度传感器</h5><p>参考<a class="link" target="_blank" rel="noopener" href="https://github.com/yfgeek/rpi-TempRuntime">项目<i class="fas fa-external-link-alt"></i></a></p><h6 id="1-DHT11温湿度传感器的安装"><a href="#1-DHT11温湿度传感器的安装" class="headerlink" title="1.DHT11温湿度传感器的安装"></a>1.DHT11温湿度传感器的安装</h6><p>电阻：4.7–10KΩ</p><p>接线原理图</p><p><img lazyload alt="image" data-src="https://ws1.sinaimg.cn/large/0062r8cigy1g7p3rs9snsj30di0eo0tx.jpg" alt="接线.jpg"></p><p>接线实物图</p><h6 id="2-收集传感器的信息"><a href="#2-收集传感器的信息" class="headerlink" title="2.收集传感器的信息"></a>2.收集传感器的信息</h6><p>安装依赖的库</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">git clone https://github.com/adafruit/Adafruit_Python_DHT.git</span><br><span class="line">cd Adafruit_Python_DHT</span><br><span class="line">sudo python setup.py install</span><br><span class="line">sudo pip install RPi.GPIO</span><br></pre></td></tr></table></figure><p>下载项目</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo mkdir /env</span><br><span class="line">cd env</span><br><span class="line">git clone https://github.com/yfgeek/rpi-TempRuntime.git</span><br></pre></td></tr></table></figure><p>修改项目</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd /env/rpi-TempRuntime</span><br><span class="line">sudo nano DHT11-WITHOUT-LCD.py</span><br></pre></td></tr></table></figure><p>修改<code>humidity, temperature = Adafruit_DHT.read_retry(sensor, 26)</code>中的26改为自己的GPIO#序号，<code>humidity, temperature = Adafruit_DHT.read_retry(sensor, 4)</code>，保存退出。</p><p>历史数据以JSON格式存储在/env/rpi-TempRuntime/web/data/min（或者hour）</p><h6 id="3-caddy部署"><a href="#3-caddy部署" class="headerlink" title="3.caddy部署"></a>3.caddy部署</h6><p>基本配置<a class="link" target="_blank" rel="noopener" href="https://pimylifeup.com/raspberry-pi-caddy-web-server/">教程<i class="fas fa-external-link-alt"></i></a></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">curl https://getcaddy.com | bash -s personal</span><br><span class="line">sudo mkdir /etc/caddy</span><br><span class="line">sudo nano /etc/caddy/Caddyfile</span><br></pre></td></tr></table></figure><p>输入</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">:80 localhost:8080 &#123;</span><br><span class="line">    /env/rpi-TempRuntime/web</span><br><span class="line">    gzip</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>2019-02-12 DHT11温湿度监视图</p><p><img lazyload alt="image" data-src="https://ws1.sinaimg.cn/large/0062r8cigy1g7p3sdjf4nj30sd0kcdhf.jpg" alt="DHT11温湿度监视图.jpg"></p><h5 id="第二个传感器"><a href="#第二个传感器" class="headerlink" title="第二个传感器"></a>第二个传感器</h5><h4 id="连接阿里云平台"><a href="#连接阿里云平台" class="headerlink" title="连接阿里云平台"></a>连接阿里云平台</h4><p>在阿里物联网平台 添加产品树莓派 增加设备 SCADA</p><p>在开发板上安装nodejs 和 npm</p><p>使用官方工具包</p><h4 id="配置python-SDK"><a href="#配置python-SDK" class="headerlink" title="配置python SDK"></a>配置python SDK</h4><p>更改 默认python为python3 <code>sudo rm -rf /usr/bin/python sudo ln -s /usr/bin/python3 /usr/bin/python</code></p><p><a class="link" target="_blank" rel="noopener" href="https://help.aliyun.com/document_detail/98292.html?spm=a2c4g.11186623.6.619.418471bc5dZy7v">教程<i class="fas fa-external-link-alt"></i></a></p><p>不能正常升级时 <a class="link" target="_blank" rel="noopener" href="http://blog.lxx1.com/3214">教程<i class="fas fa-external-link-alt"></i></a></p><p>尝试三天后被迫放弃 官方SDK太烂 原以为我水平差看不懂 原来大家都看不懂…</p><p>还在公测阶段 选择方案3 socketio</p></div><ul class="post-tags-box"><li class="tag-item"><a href="/tags/learn/">#learn</a>&nbsp;</li><li class="tag-item"><a href="/tags/unen/">#unen</a>&nbsp;</li></ul><div class="article-nav"><div class="article-prev"><a class="prev" rel="prev" href="/2019/05/27/%E4%B8%80%E5%B8%AD/"><span class="left arrow-icon flex-center"><i class="fas fa-chevron-left"></i> </span><span class="title flex-center"><span class="post-nav-title-item">一席</span> <span class="post-nav-item">Prev posts</span></span></a></div><div class="article-next"><a class="next" rel="next" href="/2019/02/15/nodejs/"><span class="title flex-center"><span class="post-nav-title-item">Nodejs</span> <span class="post-nav-item">Next posts</span> </span><span class="right arrow-icon flex-center"><i class="fas fa-chevron-right"></i></span></a></div></div><div class="comment-container"><div class="comments-container"><div id="comments-anchor"></div><div class="comment-area-title"><i class="fas fa-comments"></i>&nbsp;Comments</div><div class="valine-container"><script data-pjax src="//cdn.jsdelivr.net/npm/valine@latest/dist/Valine.min.js"></script><div id="vcomments"></div><script data-pjax>function loadValine(){function e(e){switch(e){case"en":return"Author";case"zh-CN":return"博主";default:return"Master"}}new Valine({el:"#vcomments",appId:"YAoiXSDnWpVc8Yd6z3jpxFu1-gzGzoHsz",appKey:"39w4pBqj29EMkVB8avdrw32c",meta:["nick","mail","link"],avatar:"wavatar",enableQQ:!0,placeholder:"",lang:"zh_CN".toLowerCase()});const a=setInterval(()=>{const n=document.querySelectorAll("#vcomments .vcards .vcard");if(n.length>0){let t="wukong";if(t)for(let a of n){const n=a.querySelector(".vhead .vnick"),l=n.innerHTML;l===t&&(n.innerHTML=`${l} <span class="author">${e(KEEP.hexo_config.language)}</span>`)}clearInterval(a)}else clearInterval(a)},2e3)}{const e=setTimeout(()=>{loadValine(),clearTimeout(e)},1e3)}</script></div></div></div></div><div class="toc-content-container"><div class="post-toc-wrap"><div class="post-toc"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#UNEN"><span class="nav-number">1.</span> <span class="nav-text">UNEN</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9C%8D%E5%8A%A1%E5%99%A8%E9%85%8D%E7%BD%AE%E5%8F%8A%E5%A4%87%E6%A1%88"><span class="nav-number">1.1.</span> <span class="nav-text">服务器配置及备案</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%A4%87%E6%A1%88"><span class="nav-number">1.1.1.</span> <span class="nav-text">备案</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%B7%B2%E5%BC%83%E7%94%A8%E7%9A%84%E6%96%B9%E6%A1%88windows"><span class="nav-number">1.1.2.</span> <span class="nav-text">已弃用的方案windows</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#FileZilla"><span class="nav-number">1.1.2.1.</span> <span class="nav-text">FileZilla</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%85%8D%E7%BD%AE%E9%98%BF%E9%87%8C%E4%BA%91oss%E5%81%9Amedia%E5%BA%93"><span class="nav-number">1.1.2.2.</span> <span class="nav-text">配置阿里云oss做media库</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%A7%A3%E5%86%B3%E8%BF%9C%E7%A8%8B%E6%97%A0%E6%B3%95%E8%BF%9E%E6%8E%A5%E9%97%AE%E9%A2%98"><span class="nav-number">1.1.2.3.</span> <span class="nav-text">解决远程无法连接问题</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#1-%E8%A7%A3%E5%86%B380%E7%AB%AF%E5%8F%A3%E8%A2%AB%E5%8D%A0%E7%94%A8%E9%97%AE%E9%A2%98"><span class="nav-number">1.1.2.4.</span> <span class="nav-text">1.解决80端口被占用问题</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-%E5%BC%80%E6%94%BE80%E7%AB%AF%E5%8F%A3"><span class="nav-number">1.1.2.5.</span> <span class="nav-text">2.开放80端口</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9B%B4%E6%8D%A2%E4%B8%BAlinux%E6%9C%8D%E5%8A%A1%E5%99%A8"><span class="nav-number">1.1.3.</span> <span class="nav-text">更换为linux服务器</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#mysql%E7%9A%84%E5%AE%89%E8%A3%85%E4%B8%8E%E8%BF%9C%E7%A8%8B%E7%99%BB%E5%BD%95"><span class="nav-number">1.1.3.1.</span> <span class="nav-text">mysql的安装与远程登录</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E4%B8%8B%E8%BD%BD%E4%B8%8E%E5%AE%89%E8%A3%85"><span class="nav-number">1.1.3.1.1.</span> <span class="nav-text">下载与安装</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#1-%E4%B8%8B%E8%BD%BD%E5%AE%89%E8%A3%85%E5%8C%85"><span class="nav-number">1.1.3.1.1.1.</span> <span class="nav-text">1.下载安装包</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#2-%E5%AE%89%E8%A3%85%E4%BE%9D%E8%B5%96%E5%BA%93"><span class="nav-number">1.1.3.1.1.2.</span> <span class="nav-text">2.安装依赖库</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#3-%E8%A7%A3%E5%8E%8B%E5%88%B0%E6%8C%87%E5%AE%9A%E7%9B%AE%E5%BD%95"><span class="nav-number">1.1.3.1.1.3.</span> <span class="nav-text">3.解压到指定目录</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#4-%E6%B7%BB%E5%8A%A0%E6%96%87%E4%BB%B6%E5%A4%B9%E3%80%81%E7%94%A8%E6%88%B7%E3%80%81%E8%AE%BE%E7%BD%AE%E6%9D%83%E9%99%90"><span class="nav-number">1.1.3.1.1.4.</span> <span class="nav-text">4.添加文件夹、用户、设置权限</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#5-%E5%88%9D%E5%A7%8B%E5%8C%96%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="nav-number">1.1.3.1.1.5.</span> <span class="nav-text">5.初始化数据库</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#6-%E5%AE%89%E8%A3%85ssl%E6%9C%8D%E5%8A%A1"><span class="nav-number">1.1.3.1.1.6.</span> <span class="nav-text">6.安装ssl服务</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#7-%E5%A4%8D%E5%88%B6%E6%9C%8D%E5%8A%A1%E6%96%87%E4%BB%B6"><span class="nav-number">1.1.3.1.1.7.</span> <span class="nav-text">7.复制服务文件</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E7%99%BB%E5%BD%95msyql%E4%B8%8E%E4%BF%AE%E6%94%B9%E5%AF%86%E7%A0%81"><span class="nav-number">1.1.3.1.2.</span> <span class="nav-text">登录msyql与修改密码</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#1-%E5%BC%80%E5%90%AF%E6%9C%8D%E5%8A%A1"><span class="nav-number">1.1.3.1.2.1.</span> <span class="nav-text">1.开启服务</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#2-%E4%BD%BF%E7%94%A8root%E7%99%BB%E5%BD%95%E5%B9%B6%E6%94%B9%E5%AF%86"><span class="nav-number">1.1.3.1.2.2.</span> <span class="nav-text">2.使用root登录并改密</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#3-%E9%85%8D%E7%BD%AEmysql%E4%B8%BA%E5%85%A8%E5%B1%80%E5%8F%98%E9%87%8F"><span class="nav-number">1.1.3.1.2.3.</span> <span class="nav-text">3.配置mysql为全局变量</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#mysql%E9%97%AE%E9%A2%98%E9%9B%86%E9%94%A6"><span class="nav-number">1.1.3.1.3.</span> <span class="nav-text">mysql问题集锦</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%85%8D%E7%BD%AEpython%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83"><span class="nav-number">1.1.3.2.</span> <span class="nav-text">配置python开发环境</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E9%BB%98%E8%AE%A4%E8%AE%BE%E4%B8%BApython3%E5%92%8Cpip3"><span class="nav-number">1.1.3.2.1.</span> <span class="nav-text">默认设为python3和pip3</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E9%97%AE%E9%A2%98%E9%9B%86%E9%94%A6"><span class="nav-number">1.1.3.2.2.</span> <span class="nav-text">问题集锦</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%BC%80%E5%8F%91"><span class="nav-number">1.2.</span> <span class="nav-text">服务器开发</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Django"><span class="nav-number">1.2.1.</span> <span class="nav-text">Django</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83"><span class="nav-number">1.2.1.1.</span> <span class="nav-text">开发环境</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E8%BD%AF%E4%BB%B6%E5%88%97%E8%A1%A8"><span class="nav-number">1.2.1.1.1.</span> <span class="nav-text">软件列表</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%AE%89%E8%A3%85mysql8-0"><span class="nav-number">1.2.1.1.2.</span> <span class="nav-text">安装mysql8.0</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#python%E8%99%9A%E6%8B%9F%E7%8E%AF%E5%A2%83"><span class="nav-number">1.2.1.1.3.</span> <span class="nav-text">python虚拟环境</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%AE%89%E8%A3%85%E4%BE%9D%E8%B5%96%E7%9A%84%E5%8C%85"><span class="nav-number">1.2.1.1.4.</span> <span class="nav-text">安装依赖的包</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%A1%B9%E7%9B%AE%E5%BC%80%E5%A7%8B"><span class="nav-number">1.2.1.2.</span> <span class="nav-text">项目开始</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA%E9%A1%B9%E7%9B%AE"><span class="nav-number">1.2.1.2.1.</span> <span class="nav-text">创建项目</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E6%90%AD%E5%BB%BA%E7%9B%AE%E5%BD%95%E6%96%87%E4%BB%B6"><span class="nav-number">1.2.1.2.2.</span> <span class="nav-text">搭建目录文件</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E9%85%8D%E7%BD%AE%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="nav-number">1.2.1.2.3.</span> <span class="nav-text">配置数据库</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA%E8%B6%85%E7%BA%A7%E7%94%A8%E6%88%B7"><span class="nav-number">1.2.1.2.4.</span> <span class="nav-text">创建超级用户</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%BA%94%E7%94%A8%E5%BC%80%E5%8F%91"><span class="nav-number">1.2.1.3.</span> <span class="nav-text">应用开发</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#models"><span class="nav-number">1.2.1.3.1.</span> <span class="nav-text">models</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E6%A0%B9%E6%8D%AE%E7%8E%B0%E6%9C%89%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BB%BA%E7%AB%8Bmodel"><span class="nav-number">1.2.1.3.2.</span> <span class="nav-text">根据现有数据库建立model</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E7%94%A8%E6%88%B7%E7%9A%84%E7%99%BB%E5%BD%95%E5%92%8C%E6%B3%A8%E5%86%8C"><span class="nav-number">1.2.1.3.3.</span> <span class="nav-text">用户的登录和注册</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%99%84%E5%8A%A0%E5%8C%85%E5%BC%80%E5%8F%91"><span class="nav-number">1.2.1.4.</span> <span class="nav-text">附加包开发</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#xadmin"><span class="nav-number">1.2.1.4.1.</span> <span class="nav-text">xadmin</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#template"><span class="nav-number">1.2.1.5.</span> <span class="nav-text">template</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E9%A1%B5%E7%A0%81"><span class="nav-number">1.2.1.5.1.</span> <span class="nav-text">页码</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#peewee"><span class="nav-number">1.2.2.</span> <span class="nav-text">peewee</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%AE%80%E4%BB%8B%E5%92%8C%E9%85%8D%E7%BD%AE"><span class="nav-number">1.2.2.1.</span> <span class="nav-text">简介和配置</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Querying"><span class="nav-number">1.2.2.2.</span> <span class="nav-text">Querying</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AE%A2%E6%88%B7%E7%AB%AF%E5%BC%80%E5%8F%91"><span class="nav-number">1.3.</span> <span class="nav-text">客户端开发</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%A0%91%E8%8E%93%E6%B4%BE"><span class="nav-number">1.3.1.</span> <span class="nav-text">树莓派</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%A1%AC%E4%BB%B6"><span class="nav-number">1.3.1.1.</span> <span class="nav-text">硬件</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%BD%AF%E4%BB%B6"><span class="nav-number">1.3.1.2.</span> <span class="nav-text">软件</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%85%8D%E7%BD%AE"><span class="nav-number">1.3.1.3.</span> <span class="nav-text">配置</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%97%A0%E7%BA%BF%E8%BF%9E%E6%8E%A5"><span class="nav-number">1.3.1.4.</span> <span class="nav-text">无线连接</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#putty"><span class="nav-number">1.3.1.4.1.</span> <span class="nav-text">putty</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#VNC-Viewer"><span class="nav-number">1.3.1.4.2.</span> <span class="nav-text">VNC Viewer</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#IP%E4%B8%8EMAC%E5%9C%B0%E5%9D%80%E7%BB%91%E5%AE%9A"><span class="nav-number">1.3.1.4.3.</span> <span class="nav-text">IP与MAC地址绑定</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E6%9B%B4%E6%8D%A2%E6%BA%90"><span class="nav-number">1.3.1.4.4.</span> <span class="nav-text">更换源</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Linux%E6%95%99%E7%A8%8B"><span class="nav-number">1.3.1.5.</span> <span class="nav-text">Linux教程</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%85%B3%E6%9C%BA%E9%87%8D%E5%90%AF"><span class="nav-number">1.3.1.5.1.</span> <span class="nav-text">关机重启</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E7%B3%BB%E7%BB%9F%E7%9B%AE%E5%BD%95%E8%AF%B4%E6%98%8E"><span class="nav-number">1.3.1.5.2.</span> <span class="nav-text">系统目录说明</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%9F%BA%E6%9C%AC%E5%91%BD%E4%BB%A4"><span class="nav-number">1.3.1.5.3.</span> <span class="nav-text">基本命令</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%A0%91%E8%8E%93%E6%B4%BE%E5%AE%9E%E9%AA%8C%E5%AE%A4"><span class="nav-number">1.3.1.6.</span> <span class="nav-text">树莓派实验室</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#RPi-GPIO-%E6%A8%A1%E5%9D%97%E4%BD%BF%E7%94%A8%E5%9F%BA%E7%A1%80"><span class="nav-number">1.3.1.6.1.</span> <span class="nav-text">RPi.GPIO 模块使用基础</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8-RPi-GPIO-%E6%A8%A1%E5%9D%97%E7%9A%84%E8%BE%93%E5%85%A5%EF%BC%88Input%EF%BC%89%E5%8A%9F%E8%83%BD"><span class="nav-number">1.3.1.6.1.1.</span> <span class="nav-text">使用 RPi.GPIO 模块的输入（Input）功能</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#18B20%E6%B8%A9%E5%BA%A6%E4%BC%A0%E6%84%9F%E5%99%A8"><span class="nav-number">1.3.1.6.2.</span> <span class="nav-text">18B20温度传感器</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#DHT11%E6%B8%A9%E6%B9%BF%E5%BA%A6%E4%BC%A0%E6%84%9F%E5%99%A8"><span class="nav-number">1.3.1.6.3.</span> <span class="nav-text">DHT11温湿度传感器</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#1-DHT11%E6%B8%A9%E6%B9%BF%E5%BA%A6%E4%BC%A0%E6%84%9F%E5%99%A8%E7%9A%84%E5%AE%89%E8%A3%85"><span class="nav-number">1.3.1.6.3.1.</span> <span class="nav-text">1.DHT11温湿度传感器的安装</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#2-%E6%94%B6%E9%9B%86%E4%BC%A0%E6%84%9F%E5%99%A8%E7%9A%84%E4%BF%A1%E6%81%AF"><span class="nav-number">1.3.1.6.3.2.</span> <span class="nav-text">2.收集传感器的信息</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#3-caddy%E9%83%A8%E7%BD%B2"><span class="nav-number">1.3.1.6.3.3.</span> <span class="nav-text">3.caddy部署</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E7%AC%AC%E4%BA%8C%E4%B8%AA%E4%BC%A0%E6%84%9F%E5%99%A8"><span class="nav-number">1.3.1.6.4.</span> <span class="nav-text">第二个传感器</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%BF%9E%E6%8E%A5%E9%98%BF%E9%87%8C%E4%BA%91%E5%B9%B3%E5%8F%B0"><span class="nav-number">1.3.1.7.</span> <span class="nav-text">连接阿里云平台</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%85%8D%E7%BD%AEpython-SDK"><span class="nav-number">1.3.1.8.</span> <span class="nav-text">配置python SDK</span></a></li></ol></li></ol></li></ol></li></ol></div></div></div></div></div></div></div><div class="page-main-content-bottom"><footer class="footer"><div class="info-container"><div class="copyright-info info-item">&copy; 2024 &nbsp;<i class="fas fa-heart icon-animate"></i> &nbsp;<a href="/">wukong</a></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div class="website-count info-item">Visitor Count&nbsp;<span id="busuanzi_value_site_uv"></span>&ensp; Totalview&nbsp;<span id="busuanzi_value_site_pv"></span></div><div class="theme-info info-item">Powered by <a target="_blank" href="https://hexo.io">Hexo</a>&nbsp;|&nbsp;Theme&nbsp;<a class="theme-version" target="_blank" href="https://github.com/XPoet/hexo-theme-keep">Keep v3.5.1</a></div></div></footer></div></div><div class="post-tools"><div class="post-tools-container"><ul class="tools-list"><li class="tools-item flex-center toggle-show-toc"><i class="fas fa-list"></i></li><li class="tools-item flex-center go-to-comments"><i class="fas fa-comment"></i> <span class="post-comments-count"></span></li></ul></div></div><div class="right-bottom-side-tools"><div class="side-tools-container"><ul class="side-tools-list"><li class="tools-item tool-font-adjust-plus flex-center"><i class="fas fa-search-plus"></i></li><li class="tools-item tool-font-adjust-minus flex-center"><i class="fas fa-search-minus"></i></li><li class="tools-item tool-dark-light-toggle flex-center"><i class="fas fa-moon"></i></li><li class="tools-item rss flex-center"><a class="flex-center" href="/atom.xml" target="_blank"><i class="fas fa-rss"></i></a></li><li class="tools-item tool-scroll-to-bottom flex-center"><i class="fas fa-arrow-down"></i></li></ul><ul class="exposed-tools-list"><li class="tools-item tool-toggle-show flex-center"><i class="fas fa-cog fa-spin"></i></li><li class="tools-item tool-scroll-to-top flex-center"><i class="arrow-up fas fa-arrow-up"></i> <span class="percent"></span></li></ul></div></div><div class="zoom-in-image-mask"><img class="zoom-in-image"></div><div class="search-pop-overlay"><div class="popup search-popup"><div class="search-header"><span class="search-input-field-pre"><i class="fas fa-keyboard"></i></span><div class="search-input-container"><input autocomplete="off" autocorrect="off" autocapitalize="off" placeholder="Search..." spellcheck="false" type="search" class="search-input"></div><span class="close-popup-btn"><i class="fas fa-times"></i></span></div><div id="search-result"><div id="no-result"><i class="fas fa-spinner fa-pulse fa-5x fa-fw"></i></div></div></div></div></main><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.5.1/source/js/utils.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.5.1/source/js/main.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.5.1/source/js/header-shrink.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.5.1/source/js/back2top.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.5.1/source/js/dark-light-toggle.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.5.1/source/js/local-search.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.5.1/source/js/code-block.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.5.1/source/js/lazyload.js"></script><div class="post-scripts pjax"><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.5.1/source/js/post-helper.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.5.1/source/js/toc.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.5.1/source/js/libs/anime.min.js"></script></div><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.5.1/source/js/libs/pjax.min.js"></script><script>window.addEventListener("DOMContentLoaded",()=>{window.pjax=new Pjax({selectors:["head title",".page-container",".pjax"],history:!0,debug:!1,cacheBust:!1,timeout:0,analytics:!1,currentUrlFullReload:!1,scrollRestoration:!1}),document.addEventListener("pjax:send",()=>{KEEP.utils.pjaxProgressBarStart()}),document.addEventListener("pjax:complete",()=>{KEEP.utils.pjaxProgressBarEnd(),window.pjax.executeScripts(document.querySelectorAll("script[data-pjax], .pjax script")),KEEP.refresh()})})</script></body></html>