function initTOC(){const t=document.querySelector(".post-page-container");var e=document.querySelector(".toc-content-container");KEEP.utils.hasToc?(KEEP.utils={...KEEP.utils,findActiveIndexByTOC(){if(Array.isArray(KEEP.utils.sections)){let t=KEEP.utils.sections.findIndex(t=>t&&0<t.getBoundingClientRect().top-20);-1===t?t=KEEP.utils.sections.length-1:0<t&&t--,this.activateNavByIndex(t)}},registerSidebarTOC(){KEEP.utils.sections=[...document.querySelectorAll(".post-toc li a.nav-link")].map(o=>{const i=document.getElementById(decodeURI(o.getAttribute("href")).replace("#",""));return o.addEventListener("click",t=>{t.preventDefault();let e=window.scrollY;e=0===e?-20:e;t=i.getBoundingClientRect().top+e;window.anime({targets:document.scrollingElement,duration:500,easing:"linear",scrollTop:t-10,complete:()=>{history.pushState(null,document.title,o.href),setTimeout(()=>{KEEP.utils.pageTop_dom.classList.add("hide")},150)}})}),i})},activateNavByIndex(t){const e=document.querySelectorAll(".post-toc li a.nav-link")[t];if(e&&!e.classList.contains("active-current")){document.querySelectorAll(".post-toc .active").forEach(t=>{t.classList.remove("active","active-current")}),e.classList.add("active","active-current");let t=e.parentNode;for(;!t.matches(".post-toc");)t.matches("li")&&t.classList.add("active"),t=t.parentNode;const o=document.querySelector(".post-toc-wrap");window.anime({targets:o,duration:200,easing:"linear",scrollTop:o.scrollTop-o.offsetHeight/2+e.getBoundingClientRect().top-o.getBoundingClientRect().top})}},handleShowWhenHasToc(){var t=()=>{const t=KEEP.getStyleStatus();var e="isShowToc";t&&t.hasOwnProperty(e)?KEEP.utils.postHelper.hasToc(t[e]):KEEP.utils.postHelper.hasToc(!0)},e="init_open";!KEEP.theme_config.toc.hasOwnProperty(e)||KEEP.theme_config.toc[e]?t():KEEP.utils.postHelper.hasToc(!1)}},KEEP.utils.handleShowWhenHasToc(),KEEP.utils.registerSidebarTOC()):e&&t&&t.removeChild(e)}!0===KEEP.theme_config.pjax.enable&&KEEP.utils?initTOC():window.addEventListener("DOMContentLoaded",initTOC);